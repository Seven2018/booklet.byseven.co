<% if (['Super Admin', 'Admin', 'HR'].include?(current_user.access_level) && params[:redirect_from] != 'dashboard' && params[:redirect_from] != 'user_show') && params[:content_access] != 'granted' %>
<div class="content-add">
  <div class="content-add-left">
    <%= simple_form_for content, remote: true do |f| %>
        <%= f.input :title, label: false, input_html: { autocomplete: "off" } %>
        <%= f.input :description, label: false, input_html: { autocomplete: "off"}, placeholder: 'Write the objective or purpose of the workshop here.' %>
    <%= f.submit '', class: 'hidden-submit hidden' %>
     <div class="add-text add-text-template hidden">
        <%= simple_form_for Mod.new, remote: true do |f| %>
        <%= f.hidden_field :content_id, value: @content.id %>
        <%= f.hidden_field :mod_type, value: 'text' %>
        <div class="add-text-flex">
        <%= f.input :title, placeholder: '*Required', label: 'Title', input_html: {class:'text-flex'}, required: false %>
        <%= f.input :duration, input_html: {min: 0}, label: 'Duration(Min)' %>
        </div>
        <%= f.rich_text_area :text, placeholder: 'Content', label: false %>
        <%= f.submit '', class: 'hidden-submit hidden' %>
        <% end %>
     </div>
     <div class="add-video add-video-template hidden">
      <%= simple_form_for Mod.new, remote: true do |f| %>
      <%= f.hidden_field :content_id, value: @content.id %>
      <%= f.hidden_field :mod_type, value: 'video' %>
      <%= f.input :title, placeholder: '*Required', label: 'Title:', value: '' %>
      <%= f.input :duration, input_html: {min: 0}, label: 'Duration(Min):' %>
      <%= f.input :video, placeholder: 'Youtube URL', label: 'Video Link:', value: '' %>
      <%= f.submit '', class: 'hidden-submit hidden' %>
      <% end %>
     </div>
     <div class="add-quiz add-quiz-template hidden">
        <%= simple_form_for :new_assessment, url: create_ajax_assessment_path, remote: true do |f| %>
        <%= f.input :title, placeholder: '*Required', label:'Title:' %>
        <%= f.input :duration, input_html: {min: 0}, label:'Duration(Min):' %>
        <%= f.hidden_field :content_id, value: @content.id %>
        <%= f.submit '', class: 'hidden-submit hidden' %>
        <% end %>
     </div>
    <% if (['Super Admin', 'Admin', 'HR'].include?(current_user.access_level) && (params[:redirect_from] == 'catalogue' || params[:redirect_from] == 'edit')) %>
      <div class="content-show-mods-container">
        <div class="content-show-mods-control-btn" onclick="contentAdd()"; data-toggle='tooltip' title='Add content'>
          <div class='add-content-btn' id='icon-edit'><p><i class="fas fa-plus-circle" ></i>Add Content</p></div>
          <i class="fas fa-plus fa-2x hidden" id='icon-close' style='color:#F26419'></i>
          <div class="content-show-mods-controls" style='display:none;'>
            <a class="content-show-mods-controls-block" onclick='AddText();'>
              <i class="far fa-file-alt"></i>
              <p>Text</p>
            </a>
            <a class="content-show-mods-controls-block" >
              <i class="fas fa-video"></i>
              <p>Video</p>
            </a>
            <% if @content.mods.where(mod_type: 'assessment').count >= 1 %>
              <div class="content-show-mods-controls-block content-show-mods-controls-block-quiz hidden" >
                <i class="fas fa-star-half-alt"></i>
                <p>Quiz</p>
              </div>
            <% else %>
              <div class="content-show-mods-controls-block content-show-mods-controls-block-quiz" >
                <i class="fas fa-star-half-alt"></i>
                <p>Quiz</p>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
      <div class="button-add-catalogue">
        <div class="btn-orange">
          <%= link_to 'Add to catalogue', catalogue_path %>
        </div>
      </div>
    <div class="content-add"></div>
  </div>
  <div class="content-add-right">
    <div class="content-show-infos-duration" >
      <p style='color:#808080;'><b>Duration</b></p>
      <p><%= content.duration %> min <i class="far fa-clock"></i></p>
    </div>
    <div class="content-show-infos-themes">
      <p style='color:#808080;'><b>Themes</b></p>
      <div class="theme-btns">
        <% content.categories.order(title: :asc).each do |category| %>
          <p class="category-tag"><%= category.title %></p>
        <% end %>
        <a data-toggle='modal' data-target='#addTheme' data-toggle='tooltip' title='Add Theme' class='add-theme'><i class="fas fa-plus" style='color:#F26419;'></i></a><br>
      </div>
    </div>
      <div><p style='color:#808080;'><b>Workshop Type</b></p>
        <div class="content-type-radio">
        <%= f.input :content_type, as: :radio_buttons, collection: [['Synchronous', 'In Person'], ['Asynchronous', 'Online']], :checked => [content.content_type, content.content_type], label_method: :second, value_method: :first, legend_tag: false, input_html: {onclick: 'saveOnSelect();'}, class: 'content-type-radio' %>
          <div class="content-type-icons">
            <i class="fas fa-chalkboard-teacher" style='margin: 3px 0px 13px 0px; color:#F26419;'></i>
            <i class="fas fa-laptop"></i>
          </div>
        </div>
      </div>
  </div>
  <% end %>
</div>
<% else %>
  <div class="content-info">
    <div class="content-type-categories">
      <div class="content-employee">
        <div class="content-show-infos-employee">
          <p class='content.title'><b><%= content.title %></b></p>
        </div>
        <div class="content-show-infos-employee content-show-infos-themes" style='margin-top:10px;'>
          <% content.categories.order(title: :asc).each do |category| %>
            <p class="category-tag"><%= category.title %></p>
          <% end %>
        </div>
      </div>
      <div class="content-type-radio-employee">
        <div class="slidecontainer">
          <p class='sliding'><i class="far fa-clock"></i> <%= content.duration %> Minutes</p>
        </div>
        <% if content.content_type == 'Synchronous' %>
          <p><i class="fas fa-chalkboard-teacher" style='color:#F26419'></i> In Person</p>
        <% else %>
          <p><i class="fas fa-laptop"></i> Online</p>
        <% end %>
      </div>
    </div>
      <div class="content-show-infos-employee content-show-infos-trix"style='margin-top:20px;'>
        <p>
          <% if content.description.present? %>
            <p><%= content.description %></p>
          <% end %>
        </p>
      </div>
    </div>
<% end %>

<div class='modal fade' id='addTheme' tabindex='-1' role='dialog' aria-labelledby='myModalLabel'  data-backdrop="static" data-keyboard="false">
  <div class='modal-dialog modal-lg' role='document' style='border-radius: 20px'>
    <%= render 'contents/manage_categories', content: content %>
  </div>
</div>
