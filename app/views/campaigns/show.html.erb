<div id="app">
  <campaign-show campaign-id="<%= @campaign.id %>"></campaign-show>
</div>

<% interviewers = @campaign.interviewers.distinct %>

<div id="stimulus-interviews--campaigns-show-controller"
     class="d-flex flex-column justify-content-start align-items-center pt-5rem"
     data-controller="interviews--campaigns-show">

  <div class="d-flex justify-content-center align-items-center width-80 mb-5rem">

    <div class="d-flex justify-content-start align-items-center width-100">

      <h1 class="d-flex align-items-center fs-2_4rem font-weight-500 bkt-dark-grey mr-2rem">
        <a href="<%= my_team_interviews_path %>" class="fs-2_4rem font-weight-500 bkt-dark-grey">My team Interviews</a>
        <svg class="mx-1rem" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="2.4rem" height="2.4rem" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path fill="#787878" d="M96 220a12.2 12.2 0 0 1-8.5-3.5a12 12 0 0 1 0-17L159 128L87.5 56.5a12 12 0 0 1 17-17l80 80a12 12 0 0 1 0 17l-80 80A12.2 12.2 0 0 1 96 220Z"/></svg>
        <%= @campaign.title %>
      </h1>

      <p class="d-flex align-items-center height-3rem fs-1_4rem font-weight-500 bkt-white px-2rem
                py-0_75rem rounded-15px <%= @campaign.completion_status_color(:all) %>">
        <%= @campaign.completion_status_string(:all) %>
      </p>

    </div>

    <div class="d-flex flex-column align-items-center">

      <p class="fs-1_6rem font-weight-600 bkt-dark-grey">Deadline :</p>
      <p class="fs-1_6rem font-weight-500 bkt-light-grey6 text-nowrap">
        <%= @campaign.deadline %>
      </p>

    </div>

  </div>

  <div class="width-80" data-controller='tabs' data-tabs-target='tabContainer'>

    <div class="flex-row-start-centered width-100 mb-2rem border-bottom-bkt-light-grey5"
         style='height: 32.5px;'>

      <div id="control_participants"
         class="booklet-tab-control booklet-tab-blue d-flex align-items-center fs-1_6rem px-1rem pb-0_75rem z-index-5 cursor-pointer active"
         data-action='click->tabs#selectTab'>

        <p>Participants</p>

        <div class="interviews-tab-control__counter flex-row-center-centered height-2rem
                    rounded-10px p-0_5rem ml-0_75rem">

          <p class="fs-1rem font-weight-600"
             data-interviews--campaigns-show-target="employeeCount">
            <%= @total_employees_count %>
          </p>

        </div>

      </div>

    </div>

    <div class="width-100 mb-5rem">

      <div id="tab_participants"
           class='booklet-tab bkt-box-shadow-light px-3rem py-2rem rounded-20px'
           data-controller="change-page">

        <div class="d-flex justify-content-between align-items-start width-100">

          <div id="searchbar-wrap"
               class="d-flex justify-content-start align-items-start width-80 pos-rel">

            <i class="fas fa-search searchbar-icon"></i>

            <%= simple_form_for :search, url: campaign_path(@campaign),
                                         method: :get, remote: true do |f| %>
              <%= f.input :name, placeholder: 'Search',
                                 input_html: {
                                   autocomplete: 'off',
                                   data: {
                                    action: 'keyup->interviews--campaigns-show#searchSubmit'
                                   }
                                 },
                                 label: false,
                                 required: false %>

              <div class="d-flex align-items-center flex-wrap">

                <%= render_component(Tools::SelectComponent.new(width: '17rem',
                                                            menu_max_height: '20rem',
                                                            klasses: 'mb-1rem',
                                                            input_name: 'search[completion]',
                                                            title: 'All completions',
                                                            collection: ['All completions', 'Not started', 'In progress', 'Completed'],
                                                            data_action: 'click->interviews--campaigns-show#searchSubmit')) %>

              </div>

              <%= f.hidden_field :page, value: '1', data: { change_page_target: :pageInput } %>
              <%= f.submit '', class: 'hidden-submit d-none',
                               data: {
                                 interviews__campaigns_show_target: "searchSubmit",
                                 remember_search_target: :submit,
                                 change_page_target: :submit,
                                 search_form: :submit
                               } %>
            <% end %>

            <button class='btn-reset bkt-dark-grey'
                    data-action="interviews--campaigns-show#searchReset">
              Reset
            </button>

          </div>

        </div>

        <div class="d-flex justify-content-start align-items-center border-bottom-bkt-light-grey pb-2rem">

          <div class="width-20 min-width-20 fs-1_6rem font-weight-700 bkt-light-grey6">
            Interviewee
          </div>
          <div class="width-20 min-width-20 fs-1_6rem font-weight-700 bkt-light-grey6">
            Template
          </div>
          <div class="width-20 min-width-20 fs-1_6rem font-weight-700 bkt-light-grey6">
            Interviewer
          </div>
          <div class="width-20 min-width-20 fs-1_6rem font-weight-700 bkt-light-grey6">
            Tags
          </div>
          <div class="width-20 min-width-20 fs-1_6rem font-weight-700 bkt-light-grey6">
            Completion
          </div>

        </div>

        <div id="employees-list">

          <%= render 'campaigns/show/show_employees', campaign: @campaign, employees: @employees %>

        </div>

      </div>

    </div>

  </div>


  <!------------>
  <!-- HIDDEN -->
  <!------------>

  <a id='sendEmailSuccessTrigger' class='hidden' data-toggle='modal' data-target='#sendEmailSuccess'></a>


  <!------------>
  <!-- MODALS -->
  <!------------>

  <div id='sendEmailSuccess'
       class='modal fade'
       tabindex='-1'
       role='dialog'
       data-keyboard="false"
       data-backdrop="static">

    <div class='modal-dialog'
         role='document'>
      <%= render 'campaigns/modals/send_notification_email_done', email_type: 'Invitation' %>
    </div>

  </div>

  <div id='addEmployee'
       class='modal action-modal fade'
       tabindex='-1'
       role='dialog'
       data-keyboard="false"
       data-backdrop="static"
       data-interviews--campaigns-show-target="addEmployeeModal">

    <div class='modal-dialog action-modal__dialog'
         role='document'>
      <%= render 'campaigns/modals/add_employee', campaign: @campaign %>
    </div>

  </div>

  <!------------>

</div>
