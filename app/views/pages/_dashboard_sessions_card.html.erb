<div class="catalogue-content-card">
  <div class="catalogue-content-card-left">
    <% content = Session.includes([:content]).find(session.id).content %>
    <div class="catalogue-content-card-left-main">
      <% if ['Super Admin', 'Admin', 'HR'].include?(current_user.access_level) %>
        <%= link_to '', content_path(content.id), class: 'stretched-link' %>
      <% end %>
      <h4><%= content.title %></h4>
      <p><%= content.duration %> Minutes</p>
      <div class="content-description">
        <% if content.description.present? %>
          <% if content.description.to_plain_text.length >= (200) %>
            <p><%= content.description.to_plain_text.first(200) + '...' %></p>
          <% else %>
            <p><%= content.description.to_plain_text.first(200) %></p>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="catalogue-content-card-categories">
      <% content.categories.order(title: :asc).each do |category| %>
        <p><%= category.title %></p>
      <% end %>
    </div>
    <div class="type-icon">
      <% if content.content_type == 'Synchronous' %>
        <i class="fas fa-chalkboard-teacher" style='color:#F26419;'></i>
      <% else %>
        <i class="fas fa-laptop"></i>
      <% end %>
    </div>
  </div>
  <% if content.content_type == 'Synchronous' %>
    <div class="sessions-content-card-right-syn">
      <div class="sessions-date">
        <p>Begins</p>
        <b><p><%= session.date.strftime('%B %d') %></p></b>
      </div>
      <div class="catalogue-content-card-right-sessions">
        <p><%= session.attendees.count %> Participants</p>
      </div>
    </div>
  <% elsif content.content_type == 'Asynchronous' %>
      <div class="sessions-content-card-right-asyn">
        <div class="sessions-date">
          <p>Available</p>
          <b><p><%= session.date.strftime('%B %d') %></p></b>
        </div>
        <div class="catalogue-content-card-right-interest">
          <p><%= session.attendees.count %> Participants</p>
        </div>
      </div>
      <div class="catalogue-content-card-right-sessions">
        <% interest = UserInterest.find_by(content_id: content.id, user_id: current_user.id) %>
        <% if interest.present? %>
          <%= link_to user_interest_path(id: interest.id), method: :delete, remote: true do %>
            <i class="fas fa-heart"></i>
          <% end %>
        <% else %>
          <%= link_to user_interests_path(content_id: content.id), method: :post, remote: true do %>
            <i class="far fa-heart"></i>
          <% end %>
        <% end %>
        <p><%= session.attendees.count %> Participants</p>
      </div>
    </div>
  <% end %>
</div>
