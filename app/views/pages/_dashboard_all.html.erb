<div class="dashboard-grid">
  <div class="dashboard-navigation">
    <div class="trainings-nav">
      <ul class="nav nav-tabs-trainings">
        <li role="presentation"><a href="#CurrentSessionsAll" data-toggle="tab" class='active'>Current</a></li>
        <li role="presentation"><a href="#UpcomingAll" data-toggle="tab">Upcoming</a></li>
        <li role="presentation"><a href="#CompletedAll" data-toggle="tab">Past</a></li>
        <li role="presentation"><a href="#Overview" data-toggle="tab">Overview</a></li>
      </ul>
    </div>
    <div class="tab-content">
      <div role="tabpanel" class="tab-pane" id="UpcomingAll">
        <div class="row">
          <% if @upcoming_sessions.empty? %>
            <p style='padding: 15px;'>No upcoming trainings scheduled for the moment. Browse all possible trainings in the catalogue.</p>
          <% elsif %>
            <% @upcoming_sessions.each do |session| %>
              <%= render 'dashboard_sessions_card', session: session %>
            <% end %>
          <% end %>
        </div>
      </div>
      <div role="tabpanel" class="tab-pane" id="CompletedAll">
        <div class="row">
          <% @past_sessions.each do |session| %>
            <%= render 'dashboard_sessions_card', session: session %>
          <% end %>
        </div>
      </div>
      <div role="tabpanel" class="tab-pane active" id="CurrentSessionsAll">
        <div class="row">
          <% if @current_sessions.empty? %>
            <p style='padding: 15px;'>No current trainings scheduled for the moment.</p>
          <% elsif %>
            <% @current_sessions.each do |session| %>
              <%= render 'dashboard_sessions_card', session: session %>
            <% end %>
          <% end %>
        </div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Overview">
        <%= simple_form_for :select_period, url: overview_select_period_path, method: :get, remote: true do |f| %>
          <div class="flex-row-start-centered tab-content__overview-dates">
            <div>
              <%= f.label 'From' %>
              <%= f.input :start_date, label: false, input_html: {class: 'datepicker', value: Date.today.beginning_of_year, onchange: 'selectOverviewDate()'}, onchange: 'selectOverviewDate()' %>
            </div>
            <div>
              <%= f.label 'Until' %>
              <%= f.input :end_date, label: false, input_html: {class: 'datepicker', value: Date.today, onchange: 'selectOverviewDate()'} %>
            </div>
            <%= f.submit '', class: 'hidden-submit hidden' %>
          </div>
        <% end %>
        <div class="tab-content__overview">
          <%= render 'pages/dashboard_overview', start_date: Date.today.beginning_of_year, end_date: Date.today %>
        </div>
      </div>
    </div>
  </div>
  <div class="dashboard-right-schedule">
    <div class="dashboard-calendar">
      <%= month_calendar(events: @allsessions, attribute: :date) do |date, sessions| %>
        <%= link_to dashboard_path(tab: 'all', date: date), remote: true do%>
          <div class="flex-column-between-centered">
            <%= date.day %>
            <% if sessions.present? %>
              <i class="fas fa-circle"></i>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
    <div class="schedule">
      <div class="calendar-schedule calendar-schedule-all">
        <% @date = Date.today unless @date.present? %>
        <%= render 'pages/calendar_schedule', date: @date, tab: 'all' %>
      </div>
    </div>
  </div>
</div>
