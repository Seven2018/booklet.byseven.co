document.querySelector('#template-show__lines').innerHTML = '<%= j (render("interview_forms/edit/questions_index", template: @template)) %>';
document.querySelector('#template-show__container-left').innerHTML = '<%= j (render("interview_forms/partials/show_summary", template: @template)) %>';
target = document.querySelector('#item-<%= @question.position %>').querySelector('.line-title');
toggleMod(target);

setTimeout(function(){updateStatusMessage('Up to date')}, 1000)

document.querySelectorAll('.trix-content').forEach((trix) => {
  if (trix.parentNode.querySelector('.trix_editor') == null) {
    trix.innerHTML = ''
  } else {
    trix.innerHTML = trix.parentNode.querySelector('.trix_editor').value
  }
  trix.addEventListener('keyup', (event) => {
    updateStatusMessage("Updating...")
    if (!saving) {
      saving = true
      setTimeout(function(){
        trix.parentNode.querySelector('.trix_editor').value = trix.innerHTML
        trix.closest('form').querySelector('.hidden-submit').click()
        saving = false
      }, 1000)
    }
  })
})

