<div class="modal-content">
  <div class="modal-header">
    <div id="modal-title" style=" display: flex; justify-content: space-between;">
      <h3 class="modal-title" id="myModalLabel">Export selected users to .csv</h3>
    </div>
    <button type="button" class="btn btn-icon" data-dismiss="modal" aria-label="Close"><i class="fas fa-times"></i></button>
  </div>
  <div class="modal-body modal-export__body">
    <%= simple_form_for :csv, url: organisation_path(format: :csv), method: :get do |f| %>
      <div class="organisation-controls__export-dates">
        <%= f.label 'From' %>
        <%= f.input :start_date, label: false, input_html: {class: 'datepicker', value: Date.today.beginning_of_year, onchange: 'selectOverviewDate()'}, onchange: 'selectOverviewDate()' %>
        <%= f.label 'Until' %>
        <%= f.input :end_date, label: false, input_html: {class: 'datepicker', value: Date.today, onchange: 'selectOverviewDate()'} %>
        <%= f.hidden_field :content_ids, value: '' %>
        <%= f.submit '', class: 'hidden-submit hidden' %>
      </div>
      <div class="organisation-controls__export_attributes">
        <div class="modal-filter__pill" onclick='selectAllAttributes(this)'>
          <input type="checkbox" id="select_all">
          <div class="flex-row-start-centered">
            <i class="fas fa-plus"></i>
            <label class='string required' for="select_all" onclick='this.closest(".modal-filter__pill").click()'>Select/Remove all</label>
          </div>
        </div>
      </div>
      <div class="organisation-controls__export_attributes">
        <% attributes = %w(firstname lastname email birthdate hire_date social_security address phone_number) %>
        <% attributes.each do |attribute| %>
          <% checked = false %>
          <% if ['firstname', 'lastname', 'email'].include?(attribute) %>
            <% checked = true %>
          <% end %>
          <div class="modal-filter__pill" onclick='selectCsvAttributes(this);'>
            <%= f.check_box attribute, checked: checked %>
            <div class="flex-row-start-centered">
              <i class="fas fa-plus"></i>
              <%= f.label "#{attribute}" %>
            </div>
          </div>
        <% end %>
        <%= collection_check_boxes(:tag_category, :id, TagCategory.where(company_id: current_user.company_id).order(name: :asc), :id, :name) do |b| %>
          <div class="modal-filter__pill" onclick='selectCsvAttributes(this);'>
            <%= b.check_box %>
            <div class="flex-row-start-centered">
              <i class="fas fa-plus"></i>
              <%= b.label %>
            </div>
          </div>
        <% end %>
        <div class="modal-filter__pill" onclick='selectCsvAttributes(this);'>
          <%= f.check_box :cost, checked: true %>
          <div class="flex-row-start-centered">
            <i class="fas fa-plus"></i>
            <%= f.label "Cost" %>
          </div>
        </div>
        <div class="modal-filter__pill" onclick='selectCsvAttributes(this);'>
          <%= f.check_box :trainings, checked: true %>
          <div class="flex-row-start-centered">
            <i class="fas fa-plus"></i>
            <%= f.label "Trainings attended" %>
          </div>
        </div>
        <%= f.hidden_field :selected_users %>
      </div>
      <div class="centered-item" style='margin-top: 2rem;'>
        <%= f.submit '', class: 'hidden-submit hidden' %>
        <div class="btn-white-border" onclick='exportUsers(this);'>
          <p>Export</p>
        </div>
      </div>
    <% end %>
  </div>
</div>
