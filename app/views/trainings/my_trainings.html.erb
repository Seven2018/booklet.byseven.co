 <div class="my-trainings__container">
  <div class="my-trainings__main">

    <div class="my-trainings__banner">
      <h1>Hello, <%= "#{@current_user.firstname}" %> !</h1>
      <% if current_user.manager_or_above? %>
        <p> Welcome to My Trainings section, you have 3 <%# @trainings.count %> trainings to do and/or validate, please see them below.</p>
      <% end %>
    </div>

    <%= render 'shared/searchbar_trainings' %>

    <div class="my-trainings-list">

      <div class="my-trainings-card">

        <div class="my-trainings-card__part-left">
          <div class="my-trainings-card__header">
            <div class="my-trainings-card__header-icon">
              <span class="iconify" data-icon="ic:sharp-school" style="color: #ef8c64;" data-width="24" data-height="24"></span>
            </div>
            <div class="my-trainings-card__header-title-duration">
              <div class="title"><h2>Comment faire un bon mojito ? <%# training.title  %></h2></div>
              <div class="duration">
                <span class="iconify" data-icon="bx:time-five" data-width="12" data-height="12"></span>
                <p>2h30 <%# "duration of training" %></p>
              </div>
            </div>
          </div>
          <div class="my-trainings-card__footer">
            <div class="my-trainings-card__footer-type">
              <span class="iconify" data-icon="bi:people-fill" data-flip="horizontal" style="color: #ef8c64;" data-with="18" data-height="18"></span>
              <p>Face to Face <%# "type of training: Face to face or 360" %> </p>
            </div>
            <div class="my-trainings-card__footer-date">
              <span class="iconify" data-icon="bi:calendar" style="color: #ef8c64;" data-width="18" data-height="18"></span>
              <p>Next date: 28/02/2022 at 4:00pm <%# training.date.sfrtime %> </p>
            </div>
          </div>
        </div>

        <div class="my-trainings-card__part-right">
          <div class="link-to-training-show">
            <%# "lien vers la training show" %>
            <%# link_to training_path() do %>
              <p>Go to the training  <span class="iconify" data-icon="akar-icons:chevron-right" style="color: #ef8c64;"></span></p>
            <%# end %>
          </div>
        </div>

      </div>

    </div>




  </div>
</div>

<script>

  ///////////
  // TOOLS //
  ///////////

  doubleClickGuardian = false

  function outsideClick(event, notelem) {
    notelem = $(notelem); // jquerize (optional)
    // check outside click for multiple elements
    var clickedOut = true, i, len = notelem.length;
    for (i = 0;i < len;i++)  {
        if (event.target == notelem[i] || notelem[i].contains(event.target)) {
            clickedOut = false;
        }
    }
    if (clickedOut) return true;
    else return false;
  }


  ////////////////////
  // BOOKLET SELECT //
  ////////////////////

  function BookletSelectExpand(element) {
    doubleClickGuardian = true
    dropdown = element.closest('.booklet-select__container').querySelector('.booklet-select__dropdown')
    setTimeout(() => {
      doubleClickGuardian = false
    }, 100);
    if (dropdown.classList.contains('hidden')) {
      dropdown.classList.remove('hidden')
      window.addEventListener('click', function(e) {
        if (outsideClick(e, dropdown) && !doubleClickGuardian) {
          dropdown.classList.add('hidden')
          this.removeEventListener('click', arguments.callee, false);
        }
      });
    } else {
      dropdown.classList.add('hidden')
    }
  }
</script>
