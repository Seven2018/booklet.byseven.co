<div class="modal-content action-modal__content">

  <div class="modal-header action-modal__header bkt-bg-white px-3rem pt-3rem pb-0">

    <h3 class="modal-title action-modal__title bkt-dark-grey">Assign Employees</h3>

    <button type="button" class="action-modal__close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true" class="action-modal__close-icon">&times;</span>
    </button>

  </div>

  <div class="modal-body action-modal__body px-0 pb-0 pt-3rem">

    <div class="d-flex align-items-start px-4rem mb-3rem">

      <div class="height-4rem d-flex align-items-center">
        <p class="fs-1_4rem font-weight-500 min-w-10rem mr-2rem">Employee(s) :</p>
      </div>

      <div class="d-flex align-items-center flex-wrap flex-grow-1 min-h-4rem max-h-9rem px-0_5rem border-bkt-light-grey5 rounded-3px overflow-y-scroll"
           data-objectives--objective-new-target="selectedUsersPillStorageModal"></div>

    </div>

    <div class="px-4rem pb-3rem"
         data-controller='search-inject'
         data-action='
          refreshParticipantIdsSearch@window->search-inject#debouncedSearch
          refreshParticipantIdsFilteredCount@window->objectives--objective-new#refreshFilteredCount'>

      <input type="text"
             class="d-none"
             data-search-inject-target="selected"
             data-objectives--objective-new-target="selectedUsers"
             value="">


      <div class="pos-rel">
        <i class="fas fa-search bkt-light-grey5 pos-abs" style='top: 1.2rem; left: 1rem;'></i>
        <%=
          text_field_tag(
            :search,
            nil,
            placeholder: 'Filter',
            data: {
              search_inject_target: 'search',
              action: 'keyup->search-inject#debouncedSearch keypress->search-inject#killEnter',
              path: objective_users_path
            },
            class: 'height-4rem width-100 pl-3rem mb-2rem rounded-3px border-none border-bottom-bkt-light-grey5-0_5px',
            autocomplete: 'off',
            label: false,
            required: false
          )
        %>
      </div>

      <div class="flex-row-between-centered mb-1rem" style='width: calc(100% - 2rem);'>

        <div class="d-flex">
          <p class="fs-1_4rem font-weight-500 mr-0_5rem">Selected :</p>
          <p class="fs-1_4rem font-weight-500"
             data-objectives--objective-new-target="selectedCount">
            0
          </p>
        </div>

        <div class="flex-row-between-centered">

          <div id="select_filtered"
               class="cursor-pointer d-flex align-items-center">

            <div class='fs-1_2rem bkt-objective-blue'>
              Select All
              <span class='fs-1_2rem'
                    data-objectives--objective-new-target='filteredCount'></span>
            </div>

            <div class="mx-2"></div>

            <label
              class='d-flex align-items-center justify-content-center height-2_4rem-forced width-2_4rem-forced rounded-3px mb-0
                     border-bkt-light-grey5-0_5px mr-2rem'
              data-controller='toggle-checked-participants'>

              <%= check_box_tag(
                "_",
                nil,
                false,
                class: "hidden",
                data: {
                  bordercolor: 'border-bkt-objective-blue-0_5px',
                  action: "change->objectives--objective-new#selectAll change->toggle-checked-participants#toggle",
                  toggle_checked_participants_target: "togglable",
                  objectives__objective_new_target: "selectAllButton"
                }
              ) %>

              <svg class="hidden"
                   xmlns="http://www.w3.org/2000/svg"
                   aria-hidden="true"
                   role="img"
                   width="1.8rem"
                   height="1.8rem"
                   preserveAspectRatio="xMidYMid meet"
                   viewBox="0 0 16 16"
                   data-toggle-checked-participants-target="icon">
                   <path fill="#3177b7" d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093l3.473-4.425a.267.267 0 0 1 .02-.022z"/>
              </svg>

            </label>

          </div>
        </div>
      </div>

      <div class='overflow-y-scroll' style='height: 400px;'
        data-search-inject-target="results"
        data-objectives--objective-new-target="results"
      ></div>
    </div>

    <button type="button"
            class="d-flex justify-content-center align-items-center width-100-important bkt-btn-objective-blue rounded-b-10px"
            data-dismiss="modal"
            aria-label="Close">
      Assign employee(s)
    </button>

  </div>

</div>
