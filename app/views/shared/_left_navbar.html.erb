<div class="left-navbar left-navbar-builder">
  <% unless ['workshops', 'training_workshops'].include?(params[:controller]) && params[:action] == "view_mode" %>
    <div class="left-navbar-top">
      <% if user_signed_in? %>
        <img src='<%= "#{current_user.company.logo}" %>' class="left-navbar-logo" height='24px'>
      <% end %>
    </div>
    <div class="left-navbar-middle">
      <% if user_signed_in? %>
        <%= link_to dashboard_path, class: 'left-buttons' do %>
          <% if request.original_url&.split('/')[3]&.split('?')&.first == 'dashboard' %>
            <div class="left-menu-list active">
            <i class="fas fa-home"></i> <div class="left-menu-title"><h4>My Booklet</h4></div>
          </div>
          <% else %>
            <div class="left-menu-list">
              <i class="fas fa-home"></i> <div class="left-menu-title"><h4>My Booklet</h4></div>
            </div>
          <% end %>
        <% end %>
        <%= link_to dashboard_calendar_path, class: 'left-buttons' do %>
          <% if request.original_url&.split('/')[3]&.split('?')&.first == 'dashboard-calendar' %>
            <div class="left-menu-list active">
            <i class="far fa-calendar-alt"></i> <div class="left-menu-title"><h4>Calendar</h4></div>
          </div>
          <% else %>
            <div class="left-menu-list">
              <i class="far fa-calendar-alt"></i> <div class="left-menu-title"><h4>Calendar</h4></div>
            </div>
          <% end %>
        <% end %>
        <% if ['Super Admin', 'Admin', 'HR', 'Manager'].include?(current_user.access_level) %>
          <% if request.original_url&.split('/')[3]&.split('?')&.first == 'catalogue' %>
            <%= link_to catalogue_path, class: 'left-buttons' do %>
              <div class="left-menu-list active">
                <i class="fas fa-book"></i> <div class="left-menu-title"><h4>Catalogue</h4></div>
              </div>
            <% end %>
          <% else %>
            <%= link_to catalogue_path, class: 'left-buttons' do %>
              <div class="left-menu-list">
                <i class="fas fa-book"></i> <div class="left-menu-title"><h4>Catalogue</h4></div>
              </div>
            <% end %>
          <% end %>
          <% if request.original_url&.split('/')[3]&.split('?')&.first == 'organisation' %>
            <%= link_to organisation_path, class: 'left-buttons' do %>
              <div class="left-menu-list active">
                <i class="fas fa-users"></i> <div class="left-menu-title"><h4>Organisation</h4></div>
              </div>
            <% end %>
          <% else %>
            <%= link_to organisation_path, class: 'left-buttons' do %>
              <div class="left-menu-list">
                <i class="fas fa-users"></i> <div class="left-menu-title"><h4>Organisation</h4></div>
              </div>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    </div>
    <div class="left-navbar-bottom">
      <div class="dropdown show">
        <a class="navbar-user-card dropdown-toggle flex-row-between-centered" href="#" role="button" id="dropdownMenuLogout" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <div>
            <h6><%= current_user.fullname %></h6>
          </div>
          <img src="<%= current_user.picture %>" alt="<%= current_user.fullname %>" class='avatar-sm' onerror='this.onerror=null;this.src="<%= asset_url('empty-avatar.png', type: :image) %>";'>
        </a>
        <div class="dropdown-menu" id='dropdown-user-menu' aria-labelledby="dropdownMenuLogout">
          <div class="dropdown-card dropdown-item flex-row-between-centered">
            <p>Account</p>
          </div>
          <%= link_to user_path(current_user) do %>
            <div class="dropdown-card dropdown-item flex-row-between-centered">
              <i class="fas fa-user"></i>
              <div class='dropdown-card-text'>
                <h6>Profile</h6>
              </div>
            </div>
          <% end %>
          <%= link_to destroy_user_session_path, method: :delete do %>
            <div class="dropdown-card dropdown-item flex-row-between-centered">
              <i class="fas fa-sign-out-alt"></i>
              <div class='dropdown-card-text'>
                <h6>Log out</h6>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% else %>
    <% if params[:controller] == 'workshops' %>
      <div class="left-navbar-top-view-mode centered-item">
        <%= link_to 'Exit Lecture', workshop_path(@workshop), class: 'btn btn-invite-users' %>
      </div>
      <div class="left-navbar-middle-view-mode">
        <% @workshop.mods.order(position: :asc).each do |mod| %>
          <a href="#<%= mod.id %>">
            <div class="left-menu-list">
              <div class="left-menu-title-view-mode">
                <p><%= mod.title %></p>
                <p><%= mod.duration %> min</p>
              </div>
            </div>
          </a>
        <% end %>
      </div>
    <% else %>
      <div class="left-navbar-top-view-mode centered-item">
        <%= link_to 'Exit Lecture', training_workshop_path(@training_workshop), class: 'btn btn-invite-users' %>
      </div>
      <div class="left-navbar-middle-view-mode">
        <% @training_workshop.mods.each do |mod| %>
          <a href="#<%= mod.id %>">
            <div class="left-menu-list">
              <div class="left-menu-title-view-mode">
                <p><%= mod.title %></p>
                <p><%= mod.duration %> min</p>
              </div>
            </div>
          </a>
        <% end %>
      </div>
    <% end %>
  <% end %>
</div>
